<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FiberMind.AI</title>

  <!-- Site font (fallbacks) -->
  <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@400;700&display=swap" rel="stylesheet" />

  <style>
    :root{
      --bg:#03093c;     /* site background */
      --fg:#ffffff;     /* site text color */
      --pulse:#ff2a2a;  /* red laser color */
    }

    *{ box-sizing:border-box; }
    html,body{
      height:100%;
      margin:0;
      background:var(--bg);
      color:var(--fg);
      font-family:"League Spartan",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow:hidden;
    }

    .wrap{
      min-height:100%;
      display:grid;
      place-items:center;
      padding:24px;
      text-align:center;
    }

    /* Globe (multi-source) */
    .globe-wrap{ display:grid; place-items:center; margin:0 0 18px 0; }
    .hero-globe{
      width:min(42vmin, 300px);
      height:min(42vmin, 300px);
      display:block;
      object-fit:contain;
      background:#03093c;  /* match page background */
      border:none;
    }

    h1{
      font-size:48px;
      font-weight:700;
      line-height:1.1;
      margin:0 0 20px 0;
      letter-spacing:.2px;
      color:var(--fg);
    }

    .lines{
      font-size:20px;
      font-weight:400;
      line-height:1.4;
      letter-spacing:.2px;
      display:grid;
      gap:8px;
      margin-bottom:22px;
      color:var(--fg);
    }

    .hint{ margin-top:18px; font-size:14px; opacity:.75; letter-spacing:.3px; color:var(--fg); }

    .reveal{ animation: glow 800ms ease-out both; }
    @keyframes glow{
      0%{ text-shadow:0 0 0 rgba(255,255,255,0); }
      50%{ text-shadow:0 0 10px rgba(255,255,255,.25); }
      100%{ text-shadow:0 0 0 rgba(255,255,255,0); }
    }

    /* === Transparent CTA with white outline + internal laser === */
/* === Transparent CTA with white outline + internal laser === */
.cta{
  position:relative; isolation:isolate;
  display:inline-flex; align-items:center; justify-content:center;
  text-decoration:none; cursor:pointer; user-select:none;
  padding:12px 22px;          /* fits the 24px text comfortably */
  background:transparent;
  color:#fff;
  border-radius:16px;          /* single source of truth */
  line-height:1;               /* keeps vertical centering tidy */
}
.btn-label{
  font-size:24px;              /* +20% */
  font-weight:400;
  letter-spacing:0.08em;
  white-space:nowrap;
  z-index:1;
}

/* SVG overlay now matches the button’s box 1:1 */
.laser{
  position:absolute; inset:0;
  width:100%; height:100%;
  pointer-events:none; display:block;
}
.laser .outline{
  fill:none; stroke:#fff; stroke-width:2;
  rx:16; ry:16;                /* match .cta border-radius */
}
.laser .fiber{
  fill:none; stroke:#ff2a2a; stroke-width:2;
  stroke-linecap:round; stroke-linejoin:round;
  filter: drop-shadow(0 0 4px rgba(255,42,42,.55))
          drop-shadow(0 0 8px rgba(255,42,42,.35));
  /* dash set by JS; duration = speed */
  animation: dashLoop 1.6s linear infinite;
}
@keyframes dashLoop { to { stroke-dashoffset: -1000; } } /* value overwritten by JS */
    .btn-label{
      line-height:1.2;
      font-size:24px;          /* +20% from 20px */
      font-weight:400;         /* not bold */
      letter-spacing:0.08em;
      white-space:nowrap;
      z-index:1;               /* above SVG */
    }

    /* SVG overlay spans the button box */
    .laser{
      position:absolute; inset:0;
      pointer-events:none;
      display:block;
    }

    /* White outline renders on the outer rect */
    .laser .outline{
      fill:none;
      stroke:#ffffff;
      stroke-width:2;
      shape-rendering:geometricPrecision;
    }

    /* Red laser path INSIDE the outline (inset rect) */
    .laser .fiber{
      fill:none;
      stroke:var(--pulse);
      stroke-width:2;
      stroke-linecap:round; stroke-linejoin:round;
      filter:
        drop-shadow(0 0 4px rgba(255,42,42,0.55))
        drop-shadow(0 0 8px rgba(255,42,42,0.35));
      /* dash values/offset are set dynamically by JS to match perimeter */
      stroke-dasharray: 20 200;
      animation: dashLoop 1.6s linear infinite;
    }
    @keyframes dashLoop{ to { stroke-dashoffset: -220; } }

    /* Hover polish (optional) */
    .cta:hover .fiber{
      filter:
        drop-shadow(0 0 6px rgba(255,42,42,0.7))
        drop-shadow(0 0 12px rgba(255,42,42,0.55));
    }
  </style>
</head>
<body>
  <main class="wrap">
    <section aria-labelledby="site-title">

      <!-- GLOBE: MP4 (iOS) → WebM (alpha for desktop) → PNG fallback -->
      <div class="globe-wrap">
        <video class="hero-globe" id="heroVideo" autoplay muted loop playsinline preload="auto" poster="assets/globe.png">
          <source src="assets/globe-transparent.mp4?v=1" type="video/mp4">
          <source src="assets/globe-alpha.webm?v=1" type="video/webm">
          <img src="assets/globe.png" alt="Spinning Earth">
        </video>
      </div>

      <h1 id="site-title" class="decrypt" data-final="FiberMind.AI"></h1>

      <div class="lines" aria-live="polite">
        <p class="decrypt" data-final="We’re Currently Busy Building"></p>
        <p class="decrypt" data-final="The First Foundational AI For Fiber Sensing"></p>
      </div>

      <!-- Transparent CTA with SVG outline + internal red laser -->
      <a class="cta" href="contact.html" aria-label="Contact Us">
        <span class="btn-label">Contact Us</span>

        <!-- The viewBox keeps geometry proportional; JS sizes dashes to the rect perimeter -->
        <svg class="laser" viewBox="0 0 300 90" preserveAspectRatio="none" aria-hidden="true">
          <!-- Outer outline (white) -->
          <rect class="outline" x="2" y="2" width="296" height="86" rx="16" ry="16"/>
          <!-- Inner fiber path, inset so the laser runs INSIDE the outline -->
          <rect class="fiber"  x="6" y="6" width="288" height="78" rx="12" ry="12"/>
        </svg>
      </a>

      <p class="hint" aria-hidden="true">© FiberMind.AI</p>
    </section>
  </main>

  <script>
    /* ============ Decrypt Text (all lines together) ============ */
    (function () {
      const charset="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()[]{}<>?/\\|~";
      const lines=[...document.querySelectorAll(".decrypt")];
      const stepDelay=70, perCharSteps=12;

      function scrambleTo(el, finalText){
        const len=finalText.length; let frame=0;
        return new Promise((resolve)=>{
          const timer=setInterval(()=>{
            const progress=frame/perCharSteps;
            const cutoff=Math.floor(progress*len);
            el.textContent=[...finalText].map((ch,i)=> i<=cutoff ? finalText[i] : (ch===" "?" ":"".padEnd(1,charset[Math.floor(Math.random()*charset.length)]))).join("");
            frame++;
            if(frame>perCharSteps){ el.textContent=finalText; el.classList.add("reveal"); clearInterval(timer); resolve(); }
          },stepDelay);
        });
      }
      (async function runTogether(){
        lines.forEach(el=>{
          const t=el.getAttribute("data-final")||"";
          el.textContent=[...t].map(ch=> ch===" " ? " " : charset[Math.floor(Math.random()*charset.length)]).join("");
        });
        await Promise.all(lines.map(el=>scrambleTo(el,el.getAttribute("data-final")||"")));
      })();
    })();

    /* ============ Ensure video keeps looping on mobile ============ */
    (function(){
      const v = document.getElementById('heroVideo');
      if(!v) return;
      v.addEventListener('ended', () => {
        try { v.currentTime = 0; v.play(); } catch(e){}
      });
      v.addEventListener('loadeddata', () => {
        if (v.paused) { try { v.play(); } catch(e){} }
      });
    })();

    /* ============ Make laser follow the exact inner rounded-rect path ============ */
    (function(){
      const fibers = document.querySelectorAll('.cta .laser .fiber');
      fibers.forEach(fiber => {
        // read the inner rect geometry from SVG attributes (viewBox space)
        const x  = parseFloat(fiber.getAttribute('x'))  || 0;
        const y  = parseFloat(fiber.getAttribute('y'))  || 0;
        const w  = parseFloat(fiber.getAttribute('width'))  || 0;
        const h  = parseFloat(fiber.getAttribute('height')) || 0;
        const rx = Math.max(0, parseFloat(fiber.getAttribute('rx')) || 0);
        const ry = Math.max(0, parseFloat(fiber.getAttribute('ry')) || rx);

        // Rounded-rect perimeter approximation:
        // straight edges + arcs (π * (rx + ry))
        const straight = 2 * ((w - 2*rx) + (h - 2*ry));
        const arcs = Math.PI * (rx + ry);
        const P = straight + arcs;

        // Laser segment ~7–10% of perimeter, rest gap
        const seg = Math.max(8, P * 0.09);
        const gap = Math.max(30, P - seg);

        fiber.style.strokeDasharray = `${seg} ${gap}`;

        // Bind animation distance to perimeter so speed feels constant at any size
        const style = document.createElement('style');
        style.textContent = `
          @keyframes dashLoop { to { stroke-dashoffset: -${(seg+gap).toFixed(2)}; } }
        `;
        document.head.appendChild(style);
      });
    })();
  </script>
</body>
</html>
